var dompet = function () { "use strict"; var e = $(window).width(), t = ($(window).height(), function () { var e = $(window).height() - 206; $(".chatbox .msg_card_body").css("height", e) }); return { init: function () { var n; jQuery("#menu").length > 0 && $("#menu").metisMenu(), jQuery(".metismenu > .mm-active ").each(function () { !jQuery(this).children("ul").length > 0 && jQuery(this).addClass("active-no-child") }), $("#checkAll").on("change", function () { $("td input, .email-list .custom-checkbox input").prop("checked", $(this).prop("checked")) }), $(".nav-control").on("click", function () { $("#main-wrapper").toggleClass("menu-toggle"), $(".hamburger").toggleClass("is-active") }), function () { for (var e = window.location, t = $("ul#menu a").filter(function () { return this.href == e }).addClass("mm-active").parent().addClass("mm-active"); t.is("li");)t = t.parent().addClass("mm-show").parent().addClass("mm-active") }(), $("ul#menu>li").on("click", function () { "mini" === $("body").attr("data-sidebar-style") && (console.log($(this).find("ul")), $(this).find("ul").stop()) }), n = window.outerHeight, ((n = window.outerHeight) > 0 ? n : screen.height) && $(".content-body").css("min-height", n + 60 + "px"), $('a[data-action="collapse"]').on("click", function (e) { e.preventDefault(), $(this).closest(".card").find('[data-action="collapse"] i').toggleClass("mdi-arrow-down mdi-arrow-up"), $(this).closest(".card").children(".card-body").collapse("toggle") }), $('a[data-action="expand"]').on("click", function (e) { e.preventDefault(), $(this).closest(".card").find('[data-action="expand"] i').toggleClass("icon-size-actual icon-size-fullscreen"), $(this).closest(".card").toggleClass("card-fullscreen") }), $('[data-action="close"]').on("click", function () { $(this).closest(".card").removeClass().slideUp("fast") }), $('[data-action="reload"]').on("click", function () { var e = $(this); e.parents(".card").addClass("card-load"), e.parents(".card").append('<div class="card-loader"><i class=" ti-reload rotate-refresh"></div>'), setTimeout(function () { e.parents(".card").children(".card-loader").remove(), e.parents(".card").removeClass("card-load") }, 2e3) }), function () { const e = $(".header").innerHeight(); $(window).scroll(function () { "horizontal" === $("body").attr("data-layout") && "static" === $("body").attr("data-header-position") && "fixed" === $("body").attr("data-sidebar-position") && ($(this.window).scrollTop() >= e ? $(".dlabnav").addClass("fixed") : $(".dlabnav").removeClass("fixed")) }) }(), jQuery(".dlab-scroll").each(function () { var e = jQuery(this).attr("id"); new PerfectScrollbar("#" + e, { wheelSpeed: 2, wheelPropagation: !0, minScrollbarLength: 20 }).isRtl = !1 }), e <= 991 && (jQuery(".menu-tabs .nav-link").on("click", function () { jQuery(this).hasClass("open") ? (jQuery(this).removeClass("open"), jQuery(".fixed-content-box").removeClass("active"), jQuery(".hamburger").show()) : (jQuery(".menu-tabs .nav-link").removeClass("open"), jQuery(this).addClass("open"), jQuery(".fixed-content-box").addClass("active"), jQuery(".hamburger").hide()) }), jQuery(".close-fixed-content").on("click", function () { jQuery(".fixed-content-box").removeClass("active"), jQuery(".hamburger").removeClass("is-active"), jQuery("#main-wrapper").removeClass("menu-toggle"), jQuery(".hamburger").show() })), jQuery(".bell-link").on("click", function () { jQuery(".chatbox").addClass("active") }), jQuery(".chatbox-close").on("click", function () { jQuery(".chatbox").removeClass("active") }), jQuery(".dlabnav-scroll").length > 0 && (new PerfectScrollbar(".dlabnav-scroll").isRtl = !1), $(".btn-number").on("click", function (e) { e.preventDefault(), fieldName = $(this).attr("data-field"), type = $(this).attr("data-type"); var t = $("input[name='" + fieldName + "']"), n = parseInt(t.val()); isNaN(n) ? t.val(0) : "minus" == type ? t.val(n - 1) : "plus" == type && t.val(n + 1) }), jQuery(".dlab-chat-user-box .dlab-chat-user").on("click", function () { jQuery(".dlab-chat-user-box").addClass("d-none"), jQuery(".dlab-chat-history-box").removeClass("d-none") }), jQuery(".dlab-chat-history-back").on("click", function () { jQuery(".dlab-chat-user-box").removeClass("d-none"), jQuery(".dlab-chat-history-box").addClass("d-none") }), jQuery(".dlab-fullscreen").on("click", function () { jQuery(".dlab-fullscreen").toggleClass("active") }), jQuery(".dlab-fullscreen").on("click", function (e) { document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement ? document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen() : document.documentElement.requestFullscreen ? document.documentElement.requestFullscreen() : document.documentElement.webkitRequestFullscreen ? document.documentElement.webkitRequestFullscreen() : document.documentElement.mozRequestFullScreen ? document.documentElement.mozRequestFullScreen() : document.documentElement.msRequestFullscreen && document.documentElement.msRequestFullscreen() }), jQuery(".show-pass").on("click", function () { jQuery(this).toggleClass("active"), "password" == jQuery("#dlab-password").attr("type") ? jQuery("#dlab-password").attr("type", "text") : "text" == jQuery("#dlab-password").attr("type") && jQuery("#dlab-password").attr("type", "password") }), $(".heart").on("click", function () { $(this).toggleClass("heart-blast") }), $(".dlab-load-more").on("click", function (e) { e.preventDefault(), $(this).append(' <i class="fa fa-refresh"></i>'); var t = $(this).attr("rel"), n = $(this).attr("id"); $.ajax({ method: "POST", url: t, dataType: "html", success: function (e) { $("#" + n + "Content").append(e), $(".dlab-load-more i").remove() } }) }), jQuery("#lightgallery").length > 0 && $("#lightgallery").lightGallery({ loop: !0, thumbnail: !0, exThumbImage: "data-exthumbimage" }), $(".custom-file-input").on("change", function () { var e = $(this).val().split("\\").pop(); $(this).siblings(".custom-file-label").addClass("selected").html(e) }), t(), jQuery(".dlab-demo-content").length > 0 && (new PerfectScrollbar(".dlab-demo-content"), $(".dlab-demo-trigger").on("click", function () { $(".dlab-demo-panel").addClass("show") }), $(".dlab-demo-close, .bg-close").on("click", function () { $(".dlab-demo-panel").removeClass("show") }), $(".dlab-demo-bx").on("click", function () { $(".dlab-demo-bx").removeClass("demo-active"), $(this).addClass("demo-active") })), jQuery("#datetimepicker1").length > 0 && $("#datetimepicker1").datetimepicker({ inline: !0 }), jQuery("#ckeditor").length > 0 && ClassicEditor.create(document.querySelector("#ckeditor"), {}).then(e => { window.editor = e }).catch(e => { console.error(e.stack) }) }, load: function () { setTimeout(function () { jQuery("#preloader").remove(), $("#main-wrapper").addClass("show") }, 800), jQuery(".default-select").length > 0 && jQuery(".default-select").niceSelect() }, resize: function () { t() }, handleMenuPosition: function () { e > 1024 && $(".metismenu  li").unbind().each(function (e) { if ($("ul", this).length > 0) { var t = (a = $("ul:first", this).css("display", "block")).offset().left, n = a.width(), a = $("ul:first", this).removeAttr("style"), l = ($("body").height(), $("body").width()); if (jQuery("html").hasClass("rtl")) var o = t + n <= l; else o = t > 0; o ? $(this).find("ul:first").removeClass("left") : $(this).find("ul:first").addClass("left") } }) } } }(); jQuery(document).ready(function () { $('[data-bs-toggle="popover"]').popover(), dompet.init() }), jQuery(window).on("load", function () { "use strict"; dompet.load(), setTimeout(function () { dompet.handleMenuPosition() }, 1e3) }), jQuery(window).on("resize", function () { "use strict"; dompet.resize(), setTimeout(function () { dompet.handleMenuPosition() }, 1e3) });



//  Add JavaScript to toggle the password visibility 
        function togglePassword() {
            var x = document.getElementById("passwordInput");
            var icon = document.getElementById("toggleIcon");
            if (x.type === "password") {
                x.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                x.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }

// profile dropdowns 
$(document).ready(function(){
    $('.nav-link-dropdown').on('click',function(event){
         event.preventDefault();
         $(this).closest('.nav-dropdown').find('.account_dropdown').toggle();
    });

    $(document).on('click',function(e){
        if($(e.target).closest('.nav-dropdown').length === 0){
            $('.account_dropdown').hide();
        }
    });
});

// sidebar ul li dropdown menu
$(document).ready(function(){
    $('.sidebar_content').on('click',function(event){
         event.preventDefault();
         $(this).closest('.sidebar-hasmenu').find('.sidebar_dropdown').toggle('slow');
    });

    $(document).on('click',function(e){
        if($(e.target).closest('.sidebar-hasmenu').length === 0){
            $('.sidebar_dropdown').hide();
        }
    });
});

// change password popup
// document.addEventListener('DOMContentLoaded', function() {
//     document.getElementById('passwordModalOpener').addEventListener('click', function() {
//         $('#passwordModal').modal('show'); // Opens the password change modal
//     });
// });

document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('passwordModalOpener').addEventListener('click', function() {
        // Hide the dropdown when the modal is opened
        document.querySelector('.account_dropdown').style.display = 'none';

        // Open the password change modal
        $('#passwordModal').modal('show');
    });
});

// feedback popup
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('feedbackModalOpener').addEventListener('click', function() {
        $('#feedbackModal').modal('show');
    });
});

// message popup
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('messageModalOpener').addEventListener('click', function() {
        $('#messageModal').modal('show');
    });
});

// datetime input
// $(function() {
//     $('#datetimepicker').datetimepicker();
//  });

// sidebar search input
// const searchInput = document.getElementById('searchInput');

//         searchInput.addEventListener('input', function() {
//             const searchData = searchInput.value; // Get the search input value

//             // Assuming you want to redirect to a specific page with the search query as a parameter
//             // Replace 'desiredPage' with the actual page you want to redirect to
//             window.location.href = 'viewmembers?search=' + searchData;
//         });

let arrow = document.querySelectorAll(".arrow");
console.log(arrow);

//sidebar hide/show 
    let sidebar = document.querySelectorAll('.sidebar-content');
    console.log(sidebar);
    // if (sidebar) {
    //     console.log(sidebar.classList);
    // } else {
    //     console.error('Sidebar element not found');
    // }
    function toggleSidebar() {
        var sidebar = document.querySelector('.sidebar');
        var mainBody = document.querySelector('.main-container');
        var btnIcon = document.querySelector('.btn-icon'); //add 
        var closeIcon = document.getElementById('closeIcon');
        var sidebarBtn = document.getElementById('sidebarIcon');
        var sidebarVisible = !sidebar.classList.contains('hide');

        if (sidebarVisible) {
            sidebar.classList.add('hide');
            mainBody.classList.add('adjust-margin');
            btnIcon.classList.add('icon-margin');  //add
            closeIcon.style.display = 'inline-block'; // close icon ko show karna
            sidebarBtn.style.display = 'none'; // Sidebar icon ko hide karna
        } else {
            sidebar.classList.remove('hide');
            mainBody.classList.remove('adjust-margin');
            btnIcon.classList.remove('icon-margin'); //add 
            closeIcon.style.display = 'none'; // close icon ko hide karna
            sidebarBtn.style.display = 'inline-block'; // Sidebar icon ko show karna
        }
    }

    //sidebaricon
    var sidebarBtn = document.querySelector('.fa-bars');
    sidebarBtn.addEventListener('click', toggleSidebar);
    //close icon
    var closeIcon = document.getElementById('closeIcon');
    closeIcon.addEventListener('click', toggleSidebar)

    // upload image preview
    const imageInput = document.getElementById('imageInput');
    const imagePreview = document.getElementById('imagePreview');

    imageInput.addEventListener('change', function() {
        const file = this.files[0];
        if(file) 
        {
            const reader = new FileReader();
            reader.onload = function(e)
            {
                imagePreview.setAttribute('src', e.target.result);
                //
            }
            reader.readAsDataURL(file);
        }
    });
